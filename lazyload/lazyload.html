<!DOCTYPE html>
<html>
    <head>
        <style>
            *{
            margin:0;
            padding:0;
        }
        .imgDiv{
            display:grid;
            grid-template-columns: 1fr 1fr;
            grid-gap:1rem;
            
        }

        .container{
            display:grid;
            align-items: center;
            justify-content: center;
        }
        </style>
    </head>
    <body>
        <div class="imgDiv">
            <div class="container">
                <img data-src="./product1.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product2.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product3.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product4.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product5.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product6.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product7.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product8.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product9.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product10.jpg" src="./loading.jpg">
                </img>
            </div>
            <div class="container">
                <img data-src="./product11.jpg" src="./loading.jpg">
                </img>
            </div>
        </div>
        <script>
            window.onload=function(){
                var clientHeight=getWindow().height;
                //选取所有包含属性data-src的img元素，然后在滚动的时候判断是否在可视区域
                var imgArray=document.querySelectorAll("[data-src]");
                function lazyLoad(){
                    var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;
                    for(let i=0;i<imgArray.length;i++){
                        let img=imgArray[i];
                        if(img.offsetTop-scrollTop<clientHeight){
                            img.src=img.getAttribute("data-src");
                        }

                    }
                }
                window.onscroll=lazyLoad;
                lazyLoad();

                //跨浏览器获取可视窗口大小
                function  getWindow () {
                    if(typeof window.innerWidth !='undefined') {
                        return{
                            width : window.innerWidth,
                            height : window.innerHeight
                        }

                    } else{
                        return {
                            width : document.documentElement.clientWidth,
                            height : document.documentElement.clientHeight
                        }
                    }
                }
            }
        </script>
    </body>
</html>